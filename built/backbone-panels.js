//     backbone-panels
//     (c) simonfan
//     backbone-panels is licensed under the MIT terms.

define("__backbone-panels/panel-builder",["require","exports","module","lodash","backbone-ui-resizable"],function(e,n,t){{var a=(e("lodash"),e("backbone-ui-resizable"));t.exports=a.extend({initialize:function(e){a.prototype.initialize.call(this,e),this.index=e.index},handleOptions:{directions:"w,e",clss:"handle",ratio:0,thickness:25}})}}),define("__backbone-panels/iterators",["require","exports","module","lodash"],function(e,n){var t=e("lodash"),a=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","findIndex","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];t.each(a,function(e){n[e]=function(){var n=Array.prototype.slice.call(arguments);return n.unshift(this.panels),t[e].apply(t,n)}}),n.before=function(e){return this.first(e)},n.after=function(e){return this.rest(e+1)},n.reduceBefore=function(e,n,a,i){var o=this.before(e);return t.reduce(o,n,a,i)},n.reduceAfter=function(e,n,a,i){var o=this.after(e);return t.reduce(o,n,a,i)}}),define("__backbone-panels/panel-config",["require","exports","module"],function(e,n){n.sumBefore=function(e,n){return this.reduceBefore(n,function(n,t){return n+t.get(e)},0)},n.sumAfter=function(e,n){return this.reduceAfter(n,function(n,t){return n+t.get(e)},0)},n.calculateLeftPos=function(e){return this.sumBefore("width",e)},n.postitionPanel=function(e){var n=e.index,t=this.calculateLeftPos(n);e.model.set({left:t,top:0})},n.setPanelMaxRight=function(e){var n=e.index,t=this.sumAfter("minWidth",n),a=this.sumAfter("width",-1);e.model.set("maxRight",a-t)},n.setPanelMaxLeft=function(e){var n=e.index,t=this.sumBefore("maxWidth",n);e.model.set("maxLeft",t)},n.arrange=function(){this.each(function(e){this.postitionPanel(e),this.setPanelMaxRight(e),this.setPanelMaxLeft(e)},this)}}),define("__backbone-panels/event-handlers",["require","exports","module","lodash"],function(e,n){e("lodash");n.handlePanelResize=function(e,n){var t=e.index,a=Math.abs(n.delta);if("panels-control"!==n.agent)if("expand"===n.action){if("w"===n.handle){var i=this.before(t);this.contractPanelsToLeft(i,a)}else if("e"===n.handle){var o=this.after(t);this.contractPanelsToRight(o,a)}}else if("contract"===n.action)if("w"===n.handle){var i=this.before(t);this.expandPanelsToRight(i,a)}else if("e"===n.handle){var o=this.after(t);this.expandPanelsToLeft(o,a)}},n.handlePanelResizeStart=function(){},n.handlePanelResizeStop=function(){}}),define("__backbone-panels/actions",["require","exports","module","lodash"],function(e,n){e("lodash");n.contractPanelsToLeft=function(e,n){for(;e.length>0&&0!==n;){var t=e.pop(),a=t.contractToLeft(n,{agent:"panels-control"});t.moveToLeft(a,{agent:"panels-control"}),n=a}},n.contractPanelsToRight=function(e,n){for(;e.length>0&&n>0;){var t=e.shift(),a=t.contractToRight(n,{agent:"panels-control"});t.moveToRight(a,{agent:"panels-control"}),n=a}},n.expandPanelsToLeft=function(e,n){for(;e.length>0&&0!==n;){var t=e.shift(),a=t.expandToLeft(n,{agent:"panels-control"});t.moveToLeft(a,{agent:"panels-control"}),n=a}},n.expandPanelsToRight=function(e,n){for(;e.length>0&&0!==n;){var t=e.pop(),a=t.expandToRight(n,{agent:"panels-control"});t.moveToRight(a,{agent:"panels-control"}),n=a}}}),define("backbone-panels",["require","exports","module","lowercase-backbone","lodash","./__backbone-panels/panel-builder","./__backbone-panels/iterators","./__backbone-panels/panel-config","./__backbone-panels/event-handlers","./__backbone-panels/actions"],function(e,n,t){var a=e("lowercase-backbone"),i=e("lodash"),o=e("./__backbone-panels/panel-builder"),s=t.exports=a.view.extend({initialize:function(){a.view.prototype.initialize.apply(this,arguments),this.initializePanels.apply(this,arguments)},panelBuilder:o,initializePanels:function(){i.bindAll(this,"handlePanelResize","handlePanelResizeStart","handlePanelResizeStop"),this.$el.css(this.css),this.panels=i.map(this.$el.children(),function(e,n){var t=$(e),o=t.data(),s=this.panelBuilder(i.extend(o,{el:t,model:a.model(o),index:n}));return this.listenTo(s,"resizestart",this.handlePanelResizeStart).listenTo(s,"resize-x",this.handlePanelResize).listenTo(s,"resizestop",this.handlePanelResizeStop),s},this),this.arrange()},css:{position:"relative"}});s.proto(e("./__backbone-panels/iterators")),s.proto(e("./__backbone-panels/panel-config")),s.proto(e("./__backbone-panels/event-handlers")),s.proto(e("./__backbone-panels/actions"))});