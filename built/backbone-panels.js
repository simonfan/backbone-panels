//     backbone-panels
//     (c) simonfan
//     backbone-panels is licensed under the MIT terms.

define("__backbone-panels/panel-view/helpers",["require","exports","module"],function(e,t){t.maxAddition=function(e){var t=e.addition,n=e.currValue,i=e.maxValue;if(_.isNumber(i)){var a=n+t;return i>=a?t:i-n}return t},t.maxSubtraction=function(e){var t=e.subtraction,n=e.currValue,i=e.minValue;if(_.isNumber(i)){var a=n-t;return a>=i?t:n-i}return t}}),define("__backbone-panels/panel-view/move",["require","exports","module","./helpers"],function(e,t){var n=e("./helpers");t.moveToLeft=function(e){var t=this.model,i=t.get("left"),a=n.maxSubtraction({subtraction:e,currValue:i,minValue:t.get("min-left")});return t.set("left",i-a),e-a},t.moveToRight=function(e){var t=this.model,i=t.get("left"),a=n.maxAddition({addition:e,currValue:i,maxValue:t.get("max-left")});return t.set("left",i+a),e-a}}),define("__backbone-panels/panel-view/contract",["require","exports","module","./helpers"],function(e,t){var n=e("./helpers");t.contractToRight=function(e){var t=this.model,i=t.get("width"),a=t.get("left"),o=n.maxSubtraction({subtraction:e,currValue:i,minValue:t.get("min-width")});return t.set({width:i-o,left:a+o}),e-o},t.contractToLeft=function(e){var t=this.model,i=t.get("width"),a=n.maxSubtraction({subtraction:e,currValue:i,minValue:t.get("min-width")});return t.set({width:i-a}),e-a}}),define("__backbone-panels/panel-view/expand",["require","exports","module","./helpers"],function(e,t){var n=e("./helpers");t.expandToLeft=function(e){var t=this.model,i=t.get("width"),a=t.get("left"),o=n.maxAddition({addition:e,currValue:i,maxValue:t.get("max-width")});return t.set({width:i+o,left:a-o}),e-o},t.expandToRight=function(e){var t=this.model,i=t.get("width"),a=n.maxAddition({addition:e,currValue:i,maxValue:t.get("max-width")});return t.set({width:i+a}),e-a}}),define("__backbone-panels/panel-view/index",["require","exports","module","model-dock","backbone-ui-resizable","lowercase-backbone","./move","./contract","./expand"],function(e,t,n){var i=e("model-dock"),a=e("backbone-ui-resizable"),o=e("lowercase-backbone"),r=n.exports=o.view.extend(i.prototype).extend(a.prototype).extend({initialize:function(){o.view.prototype.initialize.apply(this,arguments),this.initializeModelDock.apply(this,arguments),this.initializeResizableDock.apply(this,arguments),this.initializePanel.apply(this,arguments)},initializePanel:function(e){this.index=e.index,this.panelsView=e.panelsView,this.on("resize",this.panelsView.handleResize),this.$el.css(this.css)},css:{position:"absolute"},resizableOptions:{handles:"w,e"}});r.proto(e("./move")),r.proto(e("./contract")),r.proto(e("./expand"))}),define("__backbone-panels/iterators",["require","exports","module","lodash"],function(e,t){var n=e("lodash"),i=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];n.each(i,function(e){t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this.panelViews),n[e].apply(n,t)}}),t.before=function(e){return this.first(e)},t.after=function(e){return this.rest(e+1)},t.reduceBefore=function(e,t,i,a){var o=this.before(e);return n.reduce(o,t,i,a)},t.reduceAfter=function(e,t,i,a){var o=this.after(e);return n.reduce(o,t,i,a)},t.calculateLeftPos=function(e){var t=e.index;return this.reduceBefore(t,function(e,t){return e+t.model.get("width")},0)}}),define("__backbone-panels/positioners",["require","exports","module"],function(e,t){t.postitionPanel=function(e){var t=this.calculateLeftPos(e);e.model.set({left:t,top:0})},t.arrange=function(){this.each(this.postitionPanel,this)}}),define("__backbone-panels/event-handlers/contract-to-left",["require","exports","module","lodash"],function(e,t,n){e("lodash");n.exports=function(e,t){for(;e.length>0&&0!==t;){var n=e.pop(),i=n.contractToLeft(t);n.moveToLeft(i),t=i}}}),define("__backbone-panels/event-handlers/contract-to-right",["require","exports","module","lodash"],function(e,t,n){e("lodash");n.exports=function(e,t){for(;e.length>0&&t>0;){var n=e.shift(),i=n.contractToRight(t);n.moveToRight(i),t=i}}}),define("__backbone-panels/event-handlers/expand-to-right",["require","exports","module","lodash"],function(e,t,n){e("lodash");n.exports=function(e,t){for(;e.length>0&&0!==t;){var n=e.pop(),i=n.expandToRight(t);n.moveToRight(i),t=i}}}),define("__backbone-panels/event-handlers/expand-to-left",["require","exports","module","lodash"],function(e,t,n){e("lodash");n.exports=function(e,t){for(;e.length>0&&0!==t;){var n=e.shift(),i=n.expandToLeft(t);n.moveToLeft(i),t=i}}}),define("__backbone-panels/event-handlers/index",["require","exports","module","lodash","./contract-to-left","./contract-to-right","./expand-to-right","./expand-to-left"],function(e,t){e("lodash");t.handleResize=function(e,t){t=t.data();var n=e.index,i=Math.abs(t.delta);if("expand"===t.action){if("left"===t.handle){var a=this.before(n);this.contractToLeft(a,i)}else if("right"===t.handle){var o=this.after(n);this.contractToRight(o,i)}}else if("contract"===t.action)if("left"===t.handle){var a=this.before(n);this.expandToRight(a,i)}else if("right"===t.handle){var o=this.after(n);this.expandToLeft(o,i)}},t.contractToLeft=e("./contract-to-left"),t.contractToRight=e("./contract-to-right"),t.expandToRight=e("./expand-to-right"),t.expandToLeft=e("./expand-to-left")}),define("backbone-panels",["require","exports","module","lowercase-backbone","lodash","./__backbone-panels/panel-view/index","./__backbone-panels/iterators","./__backbone-panels/positioners","./__backbone-panels/event-handlers/index"],function(e,t,n){var i=e("lowercase-backbone"),a=e("lodash"),o=e("./__backbone-panels/panel-view/index"),r=n.exports=i.view.extend({initialize:function(){i.view.prototype.initialize.apply(this,arguments),this.initializePanels.apply(this,arguments)},panelView:o,initializePanels:function(){a.bindAll(this,"handleResize","contractToLeft","contractToRight","expandToLeft","expandToRight"),this.$el.css(this.css),this.panelViews=[],a.each(this.$el.children(),function(e,t){var n=$(e),a=n.data();a=this.parsePanelData(a);var o=this.panelView({index:t,panelsView:this,el:n,model:i.model(a)});this.panelViews.push(o)},this),this.arrange()},parsePanelData:function(e){return e["min-width"]=e.minWidth,e["max-width"]=e.maxWidth,e["min-left"]=e.minLeft,e["max-left"]=e.maxLeft,e},css:{position:"relative"}});r.proto(e("./__backbone-panels/iterators")),r.proto(e("./__backbone-panels/positioners")),r.proto(e("./__backbone-panels/event-handlers/index"))});